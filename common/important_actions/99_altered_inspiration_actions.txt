action_has_courtier_or_guest_with_inspiration = {
	type = alert
	soundeffect = "event:/DLC/EP1/SFX/UI/Notifications/inspiration_inspired_individual"

	check_create_action = {
		if = {
			limit = {
				has_dlc_feature = royal_court
				has_royal_court = yes

				any_courtier_or_guest = {
					exists = inspiration
					has_completed_inspiration = no
					inspiration = {
						NOT = { exists = inspiration_sponsor }
						save_temporary_scope_as = this_inspiration
					}
					inspiration_filters_injection = yes
					root.gold >= scope:this_inspiration.base_inspiration_gold_cost
				}
			}
			
			if = {
				limit = {
					has_royal_court = yes
				}
				try_create_important_action = {
					important_action_type = action_has_courtier_or_guest_with_inspiration
					recipient = this
				}
			}
			else = {
				random_courtier_or_guest = {
					limit = {
						exists = inspiration
						has_completed_inspiration = no
						inspiration = {
							NOT = { exists = inspiration_sponsor }
							save_temporary_scope_as = this_inspiration
						}
						inspiration_filters_injection = yes
						root.gold >= scope:this_inspiration.base_inspiration_gold_cost
					}
					save_scope_as = inspo_target
				}
				try_create_important_action = {
					important_action_type = action_has_courtier_or_guest_with_inspiration
					actor = root
					recipient = scope:inspo_target
				}
			}
		}
	}

	effect = {
		if = {
			limit = {
				has_royal_court = yes
			}
			open_view_data = royal_court
			start_tutorial_lesson = reactive_advice_fund_inspiration
		}
		else = {
			open_interaction_window = {
				interaction = fund_inspiration_interaction
				actor = scope:actor
				recipient = scope:recipient
			}
		}
	}
}
